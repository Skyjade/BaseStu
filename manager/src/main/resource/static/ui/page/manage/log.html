<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>log</title>
		<link href="../../css/all.css" rel="stylesheet">
		<script src="../../js/allSecond.js"></script>
		<style>
			.leftBox {
				position: absolute;
				left: 0;
				width: 230px;
				top: 0px;
				bottom: 0;
			}
			
			.rightBox {
				position: absolute;
				left: 0px;
				right: 0;
			}
			
			.el-input__inner {
				height: 32px;
				line-height: 32px;
			}
			
			.el-input__icon {
				height: 32px;
			}
			
			.el-date-editor .el-range-separator {
				height: 32px;
			}
			
			.el-tree-node__content {
				display: -webkit-box;
				display: -ms-flexbox;
				display: flex;
				-webkit-box-align: center;
				-ms-flex-align: center;
				align-items: center;
				height: 36px;
				cursor: pointer;
			}
			
			.el-tree-node__label {
				font-size: 14px;
				color: #666666;
			}
		</style>
	</head>

	<body>
		<div id="log" style="position: relative; width: 100%; height: 100%;">
			<!--<div class="leftBox content_bg" style="overflow-y: auto;">
				<div>
					<div class="font16 f_color1 t_left" style="height: 30px;line-height: 30px;"><span data-i18n="common.menusTitle" /></div>
					<i class="fa fa-trash-o el-icon-refresh t_right clearTree" @click="clearTree()"></i>
					<div class="clear"></div>
				</div>
				<el-tree :props="props" :load="loadNode" node-key="id" ref="tree" lazy accordion highlight-current @node-click="handleNodeClick">
				</el-tree>
			</div>-->
			<div class="content_bg" style="height: 62px;">
				<div class="t_left">
					<el-date-picker v-model="searchData" type="daterange" value-format="timestamp" :range-separator="$.t('common.to')" :default-time="['00:00:00', '23:59:59']" :picker-options="pickerOptionsDateLimit" :start-placeholder="$.t('common.startTime')" :end-placeholder="$.t('common.endTime')">
					</el-date-picker>
				</div>
				<div class="t_left mg_l20">
					<span class="mg_r15">URL</span>
					<el-input v-model.trim="searchInput" size="small" style="width:300px;height: 32px;" clearable data-i18n="[placeholder]api.inputURL" @keyup.enter.native=""></el-input>
				</div>
				<div class="t_right">
					<el-button size="small" type="primary" icon="el-icon-search" @click="searchLog()"><span data-i18n="common.search"></span></el-button>
				</div>
				<div class="clear"></div>
			</div>
			<div class="content_bg mg_t14">
				<div class="tableTitle">
					<div class="font16 f_color1 t_left" style="height: 30px;line-height: 30px;">
						<span data-i18n="common.LogTitle"></span>
					</div>
				</div>
				<el-table border stripe :data="logDataList" style="width: 100%;">
					<el-table-column prop="user_id" :label="$.t('log.userId')" width="80" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="remark" :label="$.t('log.shortResults')" min-width="120" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="access_time" :label="$.t('log.accessTime')" width="200" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="end_time" :label="$.t('log.endTime')" width="200" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="cost_time" :label="$.t('log.costTime')" width="140" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="url" label="URL" min-width="180" show-overflow-tooltip>
					</el-table-column>
					<el-table-column :label="$.t('common.operate')" width="80">
						<template slot-scope="scope">
							<el-tooltip class="item" effect="dark" :content="$.t('log.viewDetails')" placement="top">
								<el-button size="mini" icon="el-icon-view" @click="openDetailsDialog(scope.$index, scope.row)" circle></el-button>
							</el-tooltip>
						</template>
					</el-table-column>
				</el-table>
				<div class="block mg_t20" style="background: white;width:100%;height:40px;">
					<el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange" background :current-page="currentPage" :page-sizes="[10, 20, 30]" :page-size="page_size" layout="total, sizes, prev, pager, next, jumper" :total="total_count">
					</el-pagination>
				</div>
			</div>

			<el-dialog :title="$.t('log.viewDetails')" :visible.sync="detailsDialog" width="700px" :close-on-click-modal="false">
				<span v-text="$.t('log.param')" style="font-size: 15px;font-weight: bold;"></span>
				<div style="padding-bottom: 10px;word-wrap:break-word">
					<span v-text="param"></span>
				</div>
				<span v-text="$.t('log.result')" style="font-size: 15px;font-weight: bold;"></span>
				<div style="word-wrap:break-word;max-height: 200px;overflow-y: auto;">
					<span v-text="result"></span>
				</div>
				<span slot="footer" class="dialog-footer">                   					
            <el-button type="primary" @click = "detailsDialog=false" data-i18n="common.confirm"></el-button>
            </span>
			</el-dialog>
		</div>

		<script type="text/javascript" src="../../js/manage/log.js"></script>
	</body>

</html>