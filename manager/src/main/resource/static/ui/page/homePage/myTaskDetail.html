<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title></title>
		<link href="../../css/all.css" rel="stylesheet">
		<script src="../../js/allSecond.js"></script>
		<script type="text/javascript" src="../../js/libs/moment.min.js" ></script>
		<style type="text/css">
			.el-form-item {
			    margin-bottom: 0px;
			}
			iframe {
			    border-width: 0px;
			    border-style: none;
			    border-color: transparent;
			    border-image: none;
			}
			.tab{
				padding-right: 10px;cursor: pointer;
			}
			.tabActivity{
				padding-right: 10px;cursor: pointer;color: #3f9ffe;
			}
			
			.content-main {
			    height: calc(100% - 300px);
			    overflow: hidden;
			    padding: 15px 15px 0 15px;
			}
		</style>
	</head>
	<body>
		<div id="myTaskDetail" style="width: 100%; height: 100%;overflow: hidden;">
			<div style="height: 80px;border-bottom:1px solid #D8DDE7;position: absolute;top: 0;width: 100%;z-index: 1000;background: white;padding: 15px;">
				<div>
					<div class="t_left">
						<div class="font16 f_color1"><span data-i18n="homePage.processHandle"></span><span v-text = "taskObj.businessName"></span></div>
						<div class="mg_t10">
							<div class="t_left formTab tab tabActivity" @click="formBtnTab()"><span data-i18n="homePage.processForm"></span></div>
							<div class="t_left" style="padding-right: 10px;">|</div>
							<div class="t_left picTab tab" @click="picBtnTab()"><span data-i18n="homePage.flowChart"></span></div>
							<div class="t_left" style="padding-right: 10px;">|</div>
							<div class="t_left histroyTab tab" @click="histroyBtnTab()"><span data-i18n="homePage.history"></span></div>
							<div class="clear"></div>
						</div>
					</div>
					<div class="t_right">
					    <el-button size="small" type="primary" icon="el-icon-back" @click="back()"><span data-i18n="common.return"></span></el-button>
					</div>
					<div class="clear"></div>
				</div>
			</div>
			<div style="padding-bottom: 20px;margin-top:80px;height: calc(100% - 80px);background: white;overflow-y: auto;">
				<iframe v-if = "defectShow" width="100%" height="100%" v-bind:src="taskFormUrl"></iframe>
				<iframe v-if = "taskPicShow" width="100%" height="100%" v-bind:src="flowChartSrc"></iframe>
				<div v-if = "histroyFlowShow" style="padding: 20px 20px;">
					<el-table border stripe :data="taskList" highlight-current-row>
						<el-table-column prop="process_instance_id" :label="$.t('homePage.processNum')" width="180" show-overflow-tooltip>
						</el-table-column>
						<el-table-column prop="business_name" :label="$.t('homePage.workMatters')" width="180" show-overflow-tooltip>
						</el-table-column>
						<el-table-column prop="process_definition_name" :label="$.t('homePage.processName')" width="150" show-overflow-tooltip>
						</el-table-column>
						<el-table-column prop="name" :label="$.t('homePage.workItemName')" width="180" show-overflow-tooltip>
						</el-table-column>
						<el-table-column :label="$.t('common.operate')" min-width="100">
					      <template slot-scope="scope">
					      	<el-tooltip class="item" effect="dark" content="查看详情" placement="top">
						        <el-button size="mini" icon="el-icon-info" @click="openDetail(scope.$index, scope.row)" circle></el-button>
						    </el-tooltip>
					      </template>
					    </el-table-column>		
					</el-table>
					<!--<div style="height: 1px;width: 100%;background: #d1d1d1;margin-top: 20px;"></div>-->
					<!--<iframe id="mainiframe" width="100%" height="300" v-bind:src="hisTroyFlowSrc" seamless></iframe>-->
				</div>
			</div>
		</div>
		<script type="text/javascript" src="../../js/homePage/myTaskDetail.js" ></script>
		<script type="application/javascript">
			function setData(){
				var url = decodeURI(location.search); //获取url中"?"符后的字串 ('?modFlag=business&role=1')  
				var theRequest = new Object();
				if(url.indexOf("?") != -1) {
					var str = url.substr(1); //substr()方法返回从参数值开始到结束的字符串；  
					var strs = str.split("&");
					for(var i = 0; i < strs.length; i++) {
						theRequest[strs[i].split("=")[0]] = (strs[i].split("=")[1]);
					}
				}
				return theRequest.obj;
			}
			
			function back(){
				location.href = "myTask.html";
			}
		</script>
	</body>
</html>
