<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Definitions</title>
		<link href="css/all.css" rel="stylesheet">
		<script src="libs/all.js"></script>
	</head>

	<body>
		<div id="definitions" style="width: 100%;height: 100%;">
			<div class="content_bg" style="height: 62px;">
				<div class="t_left" style="line-height: 35px;" data-i18n="common.key"></div>
				<div class="t_left mg_l15">
					<el-input v-model.trim="keySearch" size="small" style="width: 200px;height: 32px;"></el-input>
				</div>
				<div class="t_left mg_l20" style="line-height: 35px;" data-i18n="common.name"></div>
				<div class="t_left mg_l15">
					<el-input v-model.trim="nameSearch" size="small" style="width: 200px;height: 32px;"></el-input>
				</div>
				<div class="t_right">
					<el-button size="small" type="primary" icon="el-icon-search" @click="searchBtn()"><span data-i18n="common.search"></span></el-button>
				</div>
				<div class="clear"></div>
			</div>
			<div class="content_bg mg_t14" style="padding:10px 15px;">
				<el-table border stripe :data="definitionsList" highlight-current-row>
					<el-table-column prop="id" :label="$.t('common.id')" width="200" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="name" :label="$.t('common.name')" min-width="180" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="version" :label="$.t('common.version')" width="100" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="key" :label="$.t('common.key')" min-width="180" show-overflow-tooltip>
					</el-table-column>
					<el-table-column :label="$.t('common.operate')" min-width="100">
						<template slot-scope="scope">
							<el-tooltip class="item" effect="dark" :content="$.t('definition.configure')" placement="top">
								<el-button size="mini" icon="el-icon-setting" @click="openDetail(scope.$index, scope.row)" circle></el-button>
							</el-tooltip>
							<el-tooltip class="item" effect="dark" :content="$.t('definition.deployHistory')" placement="top">
								<el-button size="mini" icon="el-icon-view" @click="openDeploymentDialog(scope.$index, scope.row)" circle></el-button>
							</el-tooltip>
						</template>
					</el-table-column>
					<!--<el-table-column prop="tenantId" :label="$.t('workFlow.tenant')" show-overflow-tooltip>
					</el-table-column>-->
				</el-table>
				<div class="block mg_t20" style="background: white;width:100%;height:40px;">
					<el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange" background :current-page="currentPage" :page-sizes="[10, 20, 30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper" :total="total_count">
					</el-pagination>
				</div>
			</div>

			<el-dialog :title="$.t('definition.deployments')" :visible.sync="deploymentDialog" width="650px" top="5vh" :close-on-click-modal="false">
				<div>
					<div class="detailBox">
						<div class="leftText" style="width: 120px;" data-i18n="common.id"></div>
						<div class="rightText" v-text="deployment.id"></div>
					</div>
					<div class="detailBox">
						<div class="leftText" style="width: 120px;" data-i18n="common.name"></div>
						<div class="rightText" v-text="deployment.name"></div>
					</div>
					<div class="detailBox">
						<div class="leftText" style="width: 120px;" data-i18n="deploment.deployTime"></div>
						<div class="rightText" v-text="deployment.deploymentTime"></div>
					</div>
					<div class="detailBox">
						<div class="leftText" style="width: 120px;" data-i18n="common.category"></div>
						<div class="rightText" v-text="deployment.category"></div>
					</div>
					<!--<div class="detailBox">
						<div class="leftText" data-i18n="deploment.tenantIdentifier"></div>
						<div class="rightText" v-text="deployment.tenantId"></div>
					</div>-->
					<div class="clear"></div>
				</div>
				<span slot="footer" class="dialog-footer"> 
                    <el-button type="primary" @click="deploymentDialog = false" data-i18n="common.confirm"></el-button>
                    <!--<el-button @click="deploymentDialog = false" data-i18n="common.cancel"></el-button>-->
                </span>
			</el-dialog>
		</div>
		<script type="text/javascript" src="js/definitions.js"></script>
	</body>

</html>