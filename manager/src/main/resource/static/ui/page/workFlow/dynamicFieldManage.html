<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>dynamic field manage</title>
		<link href="css/all.css" rel="stylesheet">
		<script src="libs/all.js"></script>
	</head>

	<body>
		<div id="dynamicFieldManage" style="width: 100%;height: 100%;">
			<div class="content_bg" style="padding:15px;">
				<div style="height: 55px;">
					<div class="font16 f_color1 t_left" style="height: 30px;line-height: 30px;">
						<span data-i18n="dynamicFieldManage.dynamicFieldList"></span>
					</div>
					<div class="t_right">
						<el-button round size="small" icon="el-icon-document" @click="openAddDialog()"><span data-i18n="common.add"></span></el-button>
					</div>
					<div class="clear"></div>
				</div>
				<el-table border stripe :data="dynamicFieldList" highlight-current-row>
					<el-table-column prop="default_name" :label="$.t('dynamicFieldManage.defaultName')" min-width="100" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="field" :label="$.t('dynamicFieldManage.field')" min-width="100" show-overflow-tooltip>
					</el-table-column>
					<el-table-column prop="type" :label="$.t('common.type')" width="150" show-overflow-tooltip>
					</el-table-column>
					<el-table-column :label="$.t('common.operate')" width="150" fixed="right">
						<template slot-scope="scope">
							<el-tooltip class="item" effect="dark" :content="$.t('common.delete')" placement="top">
								<el-button size="mini" type="danger" icon="el-icon-delete" :disabled="scope.row.isDelete" @click="deleteField(scope.$index, scope.row)" circle></el-button>
							</el-tooltip>
							<el-tooltip class="item" effect="dark" :content="$.t('common.edit')" placement="top">
								<el-button size="mini" icon="el-icon-edit" @click="openEditDialog(scope.$index, scope.row)" circle></el-button>
							</el-tooltip>
						</template>
					</el-table-column>
				</el-table>
				<div class="block mg_t20" style="background: white;width:100%;height:40px;">
					<el-pagination @size-change="handleSizeChange" @current-change="handleCurrentChange" background :current-page="currentPage" :page-sizes="[10, 20, 30]" :page-size="10" layout="total, sizes, prev, pager, next, jumper" :total="total_count">
					</el-pagination>
				</div>
			</div>
			<!--新增动态字段弹框-->
			<el-dialog :title="$.t('dynamicFieldManage.addDynamicField')" :visible.sync="addFieldDialog" width="410px" :close-on-click-modal="false">
				<el-form :model="fieldData" :rules="rules" ref="addField" label-width="120px" label-position="left">
					<el-form-item :label="$.t('dynamicFieldManage.defaultName')" prop="default_name">
						<el-input v-model.trim="fieldData.default_name" size="small" style="width: 250px;"></el-input>
					</el-form-item>
					<el-form-item :label="$.t('dynamicFieldManage.field')" prop="field">
						<el-input v-model.trim="fieldData.field" size="small" style="width: 250px;"></el-input>
					</el-form-item>
					<el-form-item :label="$.t('common.type')" prop="type">
						<el-select size="small" v-model="fieldData.type" style="width: 250px;">
							<el-option value="int" label="int"></el-option>
							<el-option value="string" label="string"></el-option>
							<el-option value="time" label="time"></el-option>
						</el-select>
					</el-form-item>
				</el-form>
				<span slot="footer" class="dialog-footer">                   
					<el-button type="primary" @click = "addDynamicField()" data-i18n="common.confirm"></el-button>
					<el-button @click="addFieldDialog = false" data-i18n="common.cancel"></el-button>
                </span>
			</el-dialog>
			<!--编辑动态字段弹框-->
			<el-dialog :title="$.t('dynamicFieldManage.editDynamicField')" :visible.sync="editFieldDialog" width="410px" :close-on-click-modal="false">
				<el-form :model="editFieldData" :rules="rules" ref="editField" label-width="120px" label-position="left">
					<el-form-item :label="$.t('dynamicFieldManage.defaultName')" prop="default_name">
						<el-input v-model.trim="editFieldData.default_name" size="small" style="width: 250px;"></el-input>
					</el-form-item>
					<el-form-item :label="$.t('dynamicFieldManage.field')" prop="field">
						<el-input v-model="editFieldData.field" size="small" :disabled="editDisabled" style="width: 250px;"></el-input>
					</el-form-item>
					<el-form-item :label="$.t('common.type')" prop="type">
						<el-select size="small" v-model="editFieldData.type" :disabled="editDisabled" style="width: 250px;" @change="testData">
							<el-option value="int" label="int"></el-option>
							<el-option value="string" label="string"></el-option>
							<el-option value="time" label="time"></el-option>
						</el-select>
					</el-form-item>
				</el-form>
				<span slot="footer" class="dialog-footer">                   
					<el-button type="primary" @click = "editDynamicField()" data-i18n="common.confirm"></el-button>
					<el-button @click="editFieldDialog = false" data-i18n="common.cancel"></el-button>
                </span>
			</el-dialog>
		</div>
	</body>
	<script type="text/javascript" src="js/dynamicFieldManage.js"></script>

</html>